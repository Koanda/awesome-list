var utils=function(){var t={};t.arrayFromNodeList=function(t){var e=[];for(var r=0,i=t.length;r<i;r++){e.push(t[r])}return e};t.fetch=function(t,e){var r=new XMLHttpRequest;r.open("GET",t);r.onload=function(){e(r.status,JSON.parse(r.response))};r.send()};t.template=function(t,e){var r;for(key in e){r=e[key];t=t.replace("${"+key+"}",r)}return t};t.pick=function(t,e){var r={};e.forEach(function(e){r[e]=t[e]});return r};return t}();var Cache=function(){function t(t,e){e=e||{};this._prefix=t;this._expireAfter=e.expireAfter||0}var e=t.prototype;e.set=function(t,e){e.__timestamp=Date.now();return localStorage[this._prefix+t]=JSON.stringify(e)};e.get=function(t){return JSON.parse(localStorage[this._prefix+t])};e.exists=function(t){return!!localStorage[this._prefix+t]&&!this._expired(JSON.parse(localStorage[this._prefix+t]))};e._expired=function(t){return this._expireAfter<=0?false:!t.__timestamp||t&&Date.now()>t.__timestamp+this._expireAfter*1e3};return t}();var Repository=function(){var t="https://api.github.com/repos";var e=document.getElementById("repository-tpl").innerHTML;var r="html, css, js, javascript, go, golang, framework, lightweight, library, utility".split(", ");var i=function(t){this._element=t;this._repository=t.getAttribute("data-repo");this.load(this.render.bind(this))};i._cache=new Cache("awesome.repositories.",{expireAfter:24*60*60});i.fetch=function(e,r){var i=this;if(this._cache.exists(e)){return r(false,this._cache.get(e))}utils.fetch([t,e].join("/"),function(t,n){if(t==200){i._cache.set(e,n);return r(false,n)}r(true)})};var n=i.prototype;n.load=function(t){var e=this;i.fetch(this._repository,function(r,i){if(r){e._data={name:e._element.innerHTML,html_url:["http://github.com",e._repository].join("/"),description:""}}else{e._data=i}t()})};n.highlight=function(t,e){e.forEach(function(e){t=t.replace(new RegExp("\\b"+e+"\\b","gi"),"<mark>"+e+"</mark>")});return t};n.render=function(){var t=utils.pick(this,["name","url"]);t.description=this.highlight(this.description,r);this._element.innerHTML=utils.template(e,t)};Object.defineProperties(n,{name:{get:function(){return this._data["name"]},writeable:false,configurable:true},url:{get:function(){return this._data["html_url"]},writeable:false,configurable:true},description:{get:function(){return this._data["description"]},writeable:false,configurable:true}});return i}();(function(){var t=utils.arrayFromNodeList(document.querySelectorAll("[data-repo]"));t.forEach(function(t){new Repository(t)})})();